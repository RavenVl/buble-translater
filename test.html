<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        .alert{
            display:flex;
            flex-direction: column;
            position: absolute;
            width: 200px;
            height: 400px;
            background-color: #ffffff;
            top: 200px;
            left: 200px;
            overflow: auto;
            border: 1px solid rgb(165,165,165);
            border-radius: 10px;
            box-shadow: 5px 5px 5px rgba(0,0,0,0.5);

        }
        #slideshow_display img{
            display: block;
            width: 200px;
            height: 150px;
            margin:auto;
        }
        .active{
            font-size: 1.3em;
            font-weight: 800;
        }

        .rez-name {
            margin-top: 3px;
            padding-left: 10px;
            color: rgb(165,165,165);
            font-size: 0.9em;
            font-family: Arial, Helvetica, sans-serif;
        }
        .rez-mean{
            padding-left: 5px;
            font-family:  Arial, Helvetica, sans-serif;
        }
    </style>
    <script>
        var mas = [];
        window.onload = function () {

            document.addEventListener("mouseup", selectChanged);
            document.addEventListener("mousedown", cleanDiv);
            var div = document.getElementById("buble");

        }

        function selectChanged(e) {
            var selObj = window.getSelection();
            var range  = selObj.getRangeAt(0);
            var itog =range.cloneContents();
            if(itog.textContent != ''){
                var docX = e.clientX + "px";
                var docY = e.clientY + "px";
                var div = document.createElement('div');
                div.className = "alert";
                div.id="buble";
                div.style.left = docX;
                div.style.top = docY;
                var mas = getTranslate(itog.textContent);
                var out = getTraslateHtml(mas);
                div.innerHTML = out;
                document.body.appendChild(div);



                var div2 = document.getElementById("buble");
                var elements = div2.getElementsByTagName('div');

                for (let i = 0; i < elements.length; i++) {
                    var input = elements[i];


                    input.addEventListener("mouseover", function () {
                        this.style.fontWeight=800;
                        this.style.fontSize="1.2em";
                        let val = mas[0]['meanings'];
                        let  curImg = val[i]['image_url'];
                        var contIimg = document.getElementById("slideshow_display");
                        var img =contIimg.firstElementChild;
                        img.src = curImg;


                    });


                    input.addEventListener("mouseout", function () {
                        this.style.fontWeight=400;
                        this.style.fontSize="1em";
                    });
                }
            }

        }

        function cleanDiv(e) {

            var div = document.getElementById("buble");
            if(div!= null) document.body.removeChild(div);
        }

        function getTranslate(word){
            var xhr = new XMLHttpRequest();
            xhr.open('GET', 'http://dictionary.skyeng.ru/api/v2/search-word-translation?text='+word, false);
            xhr.send();
            if (xhr.status != 200) {
                alert( xhr.status + ': ' + xhr.statusText ); // пример вывода: 404: Not Found
            } else {
                // вывести результат

               return JSON.parse(xhr.responseText) //getTraslateHtml(mas);
            }
        }

        function getTraslateHtml (arr){
            let curImg = arr["0"].meanings["0"].image_url;
            html =`<header id="slideshow_display">
                   <img src=${curImg} alt="">
                   </header>`;
            let name = arr[0]['text'];
            html+=`<main class="rez-name">${name}</main>`;

            let val = arr[0]['meanings'];
            for(let i =0;i<val.length;i++){
                let trans = val[i]['translation'];
                if (i==0){
                    html+=`<div class="active rez-mean">${trans}</div>`;
                }
                else  html+=`<div class="rez-mean">${trans}</div>`;
            }


            return html;

        }
    </script>
</head>

<body >
<p>
    In the battle to dominate Europe’s cloud computing market, American tech giants are spending big to build up their local credibility.
</p>

<p>
    Amazon Web Services, the largest player, announced last week that it would soon open multiple data centers in France and Britain. Google, which already has sites in countries like Finland and Belgium, is expected to finish a new multimillion-dollar data complex in the Netherlands by the end of the year.
</p>

<p>
    And Microsoft, by some measures the second-largest cloud computing provider in Europe, said on Monday that it had spent $1 billion in the last 12 months to expand its offerings, taking its total investment in European-based cloud services to $3 billion since 2005.
</p>

<p>
    “We’re building our global cloud infrastructure in Europe so it can be trusted by the multiple constituents,” Satya Nadella, Microsoft’s chief executive, said in an interview. “We can meet the data residency needs of our European customers.”
</p>

<p>
    With many in Europe questioning why America’s largest tech companies control how many of the region’s 500 million citizens use everyday digital services, it is not surprising that the likes of Microsoft and Amazon are eager to play up their local roots.
</p>

<p>
    As the European Union continues to clamp down on the perceived misuse of people’s digital information, analysts also say that many Silicon Valley giants are responding to these privacy concerns by increasingly offering individuals and companies the ability to keep information close to home, whereas in the past, data might have been stored solely in the United States.
</p>
“Countries like Germany are well aware of data privacy, and it has made them more wary of where data is kept,” said Gregor Petri, a cloud computing analyst at the technology research firm Gartner in Veghel, the Netherlands. “Local data sovereignty has become important, and American companies are now aware of that.”
<p>
    There is also a more basic explanation for American companies’ expansion into European cloud computing: a growing amount of money to be made.
</p>
<p>
    Europe’s market for so-called cloud application services, or software that is run virtually across the internet, is expected to more than double, to $16.1 billion, by the end of the decade, according to Gartner. That will still correspond to just one-third of the North American market, whose value is expected to reach $47 billion over the same period.
</p>
<p>
    Despite that relatively small size, Europe’s market remains one of the largest for American cloud providers, many of which are increasing investments worldwide as companies and individuals increasingly rely on cloud-based services — such as iCloud, from Apple, and Dropbox, the online storage company — in their daily lives.
</p>
<p>
    In 2014, for instance, Amazon opened a number of data centers in Germany, partly in response to that country’s strict privacy laws. Last year, Microsoft followed suit, teaming up with Deutsche Telekom — the local carrier and the owner of T-Mobile — which has control of the sites, again to comply with German legislation. (Microsoft charges a premium for the service.)
</p>

</body>
</html>